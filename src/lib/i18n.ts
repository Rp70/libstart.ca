export type Language = 'en' | 'pa' | 'zh' | 'ar' | 'es' | 'yue' | 'tl' | 'it' | 'de' | 'pt' | 'ur' | 'ru' | 'fa' | 'vi' | 'ko' | 'pl' | 'hi' | 'ta' | 'gu' | 'sh' | 'el' | 'ro' | 'bn' | 'uk' | 'nl' | 'sr' | 'ml' | 'ht' | 'hu' | 'tr' | 'ja' | 'hr' | 'so' | 'hy' | 'ilo' | 'pdt' | 'ti' | 'te' | 'sq' | 'nan' | 'am' | 'kab' | 'ne' | 'km' | 'ps' | 'yo' | 'cs' | 'sw' | 'bg' | 'sk'

export const languages = {
  en: { name: 'English', nativeName: 'English', dir: 'ltr' },
  pa: { name: 'Punjabi', nativeName: 'ਪੰਜਾਬੀ', dir: 'ltr' },
  zh: { name: 'Mandarin', nativeName: '中文', dir: 'ltr' },
  ar: { name: 'Arabic', nativeName: 'العربية', dir: 'rtl' },
  es: { name: 'Spanish', nativeName: 'Español', dir: 'ltr' },
  yue: { name: 'Cantonese', nativeName: '粵語', dir: 'ltr' },
  tl: { name: 'Tagalog', nativeName: 'Tagalog', dir: 'ltr' },
  it: { name: 'Italian', nativeName: 'Italiano', dir: 'ltr' },
  de: { name: 'German', nativeName: 'Deutsch', dir: 'ltr' },
  pt: { name: 'Portuguese', nativeName: 'Português', dir: 'ltr' },
  ur: { name: 'Urdu', nativeName: 'اردو', dir: 'rtl' },
  ru: { name: 'Russian', nativeName: 'Русский', dir: 'ltr' },
  fa: { name: 'Persian', nativeName: 'فارسی', dir: 'rtl' },
  vi: { name: 'Vietnamese', nativeName: 'Tiếng Việt', dir: 'ltr' },
  ko: { name: 'Korean', nativeName: '한국어', dir: 'ltr' },
  pl: { name: 'Polish', nativeName: 'Polski', dir: 'ltr' },
  hi: { name: 'Hindi', nativeName: 'हिन्दी', dir: 'ltr' },
  ta: { name: 'Tamil', nativeName: 'தமிழ்', dir: 'ltr' },
  gu: { name: 'Gujarati', nativeName: 'ગુજરાતી', dir: 'ltr' },
  sh: { name: 'Serbo-Croatian', nativeName: 'Srpskohrvatski', dir: 'ltr' },
  el: { name: 'Greek', nativeName: 'Ελληνικά', dir: 'ltr' },
  ro: { name: 'Romanian', nativeName: 'Română', dir: 'ltr' },
  bn: { name: 'Bengali', nativeName: 'বাংলা', dir: 'ltr' },
  uk: { name: 'Ukrainian', nativeName: 'Українська', dir: 'ltr' },
  nl: { name: 'Dutch', nativeName: 'Nederlands', dir: 'ltr' },
  sr: { name: 'Serbian', nativeName: 'Српски', dir: 'ltr' },
  ml: { name: 'Malayalam', nativeName: 'മലയാളം', dir: 'ltr' },
  ht: { name: 'Haitian Creole', nativeName: 'Kreyòl Ayisyen', dir: 'ltr' },
  hu: { name: 'Hungarian', nativeName: 'Magyar', dir: 'ltr' },
  tr: { name: 'Turkish', nativeName: 'Türkçe', dir: 'ltr' },
  ja: { name: 'Japanese', nativeName: '日本語', dir: 'ltr' },
  hr: { name: 'Croatian', nativeName: 'Hrvatski', dir: 'ltr' },
  so: { name: 'Somali', nativeName: 'Soomaali', dir: 'ltr' },
  hy: { name: 'Armenian', nativeName: 'Հայերեն', dir: 'ltr' },
  ilo: { name: 'Ilocano', nativeName: 'Ilokano', dir: 'ltr' },
  pdt: { name: 'Plautdietsch', nativeName: 'Plautdietsch', dir: 'ltr' },
  ti: { name: 'Tigrigna', nativeName: 'ትግርኛ', dir: 'ltr' },
  te: { name: 'Telugu', nativeName: 'తెలుగు', dir: 'ltr' },
  sq: { name: 'Albanian', nativeName: 'Shqip', dir: 'ltr' },
  nan: { name: 'Min Nan', nativeName: '閩南語', dir: 'ltr' },
  am: { name: 'Amharic', nativeName: 'አማርኛ', dir: 'ltr' },
  kab: { name: 'Kabyle', nativeName: 'Taqbaylit', dir: 'ltr' },
  ne: { name: 'Nepali', nativeName: 'नेपाली', dir: 'ltr' },
  km: { name: 'Khmer', nativeName: 'ភាសាខ្មែរ', dir: 'ltr' },
  ps: { name: 'Pashto', nativeName: 'پښتو', dir: 'rtl' },
  yo: { name: 'Yoruba', nativeName: 'Yorùbá', dir: 'ltr' },
  cs: { name: 'Czech', nativeName: 'Čeština', dir: 'ltr' },
  sw: { name: 'Swahili', nativeName: 'Kiswahili', dir: 'ltr' },
  bg: { name: 'Bulgarian', nativeName: 'Български', dir: 'ltr' },
  sk: { name: 'Slovak', nativeName: 'Slovenčina', dir: 'ltr' },
} as const

export const defaultLanguage: Language = 'en'

const languageMap: Record<string, Language> = {
  'en': 'en',
  'en-US': 'en',
  'en-GB': 'en',
  'en-CA': 'en',
  'pa': 'pa',
  'pa-IN': 'pa',
  'zh': 'zh',
  'zh-CN': 'zh',
  'zh-TW': 'zh',
  'zh-HK': 'zh',
  'ar': 'ar',
  'ar-SA': 'ar',
  'ar-EG': 'ar',
  'ar-AE': 'ar',
  'es': 'es',
  'es-ES': 'es',
  'es-MX': 'es',
  'es-US': 'es',
  'yue': 'yue',
  'yue-HK': 'yue',
  'tl': 'tl',
  'tl-PH': 'tl',
  'fil': 'tl',
  'it': 'it',
  'it-IT': 'it',
  'de': 'de',
  'de-DE': 'de',
  'de-AT': 'de',
  'de-CH': 'de',
  'pt': 'pt',
  'pt-PT': 'pt',
  'pt-BR': 'pt',
  'ur': 'ur',
  'ur-PK': 'ur',
  'ru': 'ru',
  'ru-RU': 'ru',
  'fa': 'fa',
  'fa-IR': 'fa',
  'vi': 'vi',
  'vi-VN': 'vi',
  'ko': 'ko',
  'ko-KR': 'ko',
  'pl': 'pl',
  'pl-PL': 'pl',
  'hi': 'hi',
  'hi-IN': 'hi',
  'ta': 'ta',
  'ta-IN': 'ta',
  'gu': 'gu',
  'gu-IN': 'gu',
  'sh': 'sh',
  'el': 'el',
  'el-GR': 'el',
  'ro': 'ro',
  'ro-RO': 'ro',
  'bn': 'bn',
  'bn-BD': 'bn',
  'bn-IN': 'bn',
  'uk': 'uk',
  'uk-UA': 'uk',
  'nl': 'nl',
  'nl-NL': 'nl',
  'nl-BE': 'nl',
  'sr': 'sr',
  'sr-RS': 'sr',
  'ml': 'ml',
  'ml-IN': 'ml',
  'ht': 'ht',
  'hu': 'hu',
  'hu-HU': 'hu',
  'tr': 'tr',
  'tr-TR': 'tr',
  'ja': 'ja',
  'ja-JP': 'ja',
  'hr': 'hr',
  'hr-HR': 'hr',
  'so': 'so',
  'so-SO': 'so',
  'hy': 'hy',
  'hy-AM': 'hy',
  'ilo': 'ilo',
  'pdt': 'pdt',
  'ti': 'ti',
  'ti-ER': 'ti',
  'ti-ET': 'ti',
  'te': 'te',
  'te-IN': 'te',
  'sq': 'sq',
  'sq-AL': 'sq',
  'nan': 'nan',
  'am': 'am',
  'am-ET': 'am',
  'kab': 'kab',
  'ne': 'ne',
  'ne-NP': 'ne',
  'km': 'km',
  'km-KH': 'km',
  'ps': 'ps',
  'ps-AF': 'ps',
  'yo': 'yo',
  'yo-NG': 'yo',
  'cs': 'cs',
  'cs-CZ': 'cs',
  'sw': 'sw',
  'sw-KE': 'sw',
  'sw-TZ': 'sw',
  'bg': 'bg',
  'bg-BG': 'bg',
  'sk': 'sk',
  'sk-SK': 'sk',
}

export function detectBrowserLanguage(): Language {
  const browserLanguages = navigator.languages || [navigator.language]
  
  for (const lang of browserLanguages) {
    if (languageMap[lang]) {
      return languageMap[lang]
    }
    
    const primaryLang = lang.split('-')[0]
    if (languageMap[primaryLang]) {
      return languageMap[primaryLang]
    }
  }
  
  return defaultLanguage
}
